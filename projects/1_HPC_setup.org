#+SETUPFILE: 0_format.cfg
# [[https://raw.githubusercontent.com/GeneKao/orgmode-latex-templates/master/simple/simple.org]]
* auto-install & wake-up service
| * wakeonlan |
| * pixiecore |
| * kexec     |
| * nix copy  |
|             |

* parallel computing (clustering)
| * torque                 | [[chrome-extension://gfbliohnnapiefjpjlpjnehglfpaknnc/pages/pdf_viewer.html?r=http://www.sas.rochester.edu/psc/thestarlab/help/TorqueTutorial.pdf][link]] |      |
| * slurm                  | [[https://m31phy.tistory.com/32][link]] |      |
| * iptime port forwarding |      | [[https://badayak.com/entry/%EC%99%B8%EB%B6%80%EC%A0%91%EC%86%8D%EC%9D%84-%EC%9C%84%ED%95%9C-iptime-%ED%8F%AC%ED%8A%B8%ED%8F%AC%EC%9B%8C%EB%94%A9-%EC%84%A4%EC%A0%95-%EB%B0%A9%EB%B2%95][link]] |
|                          |      |      |

* Virtual Machine
| * systemd-nspawn | [[https://blog.stackframe.dev/6][link]] [[https://wiki.archlinux.org/title/systemd-nspawn][docs]] |
| * machinectl     | [[https://www.systutorials.com/docs/linux/man/1-machinectl/][link]] [[https://medium.com/@huljar/setting-up-containers-with-systemd-nspawn-b719cff0fb8d][link]] |
| * nix portable   |           |
| * qemu           |           |

* HPC HW info
| cpu                     | [[https://en.wikichip.org/wiki/amd/epyc/7313][link]]  [[https://www.amd.com/ko/products/cpu/amd-epyc-7713][link2]]        |
| InifiniBand             | [[https://netmaid.tistory.com/24][link]]  [[https://sunhanintech.gitbooks.io/infiniband_programming_by_nminoru/content/chapter1.html][link2]]  [[https://jkpark.me/linux/infiniband/2019/06/04/InfiniBand-OFA-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B2%84-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%84%A4%EC%A0%95-%EB%B0%A9%EB%B2%95.html][link3]] |
| InfiniBand intro        | [[https://m.blog.naver.com/skauter/10169437853][link]]  [[https://sunhanintech.gitbooks.io/infiniband_programming_by_nminoru/content/chapter1.html][link]]         |
| device bandwidth(speed) | [[https://ko.wikipedia.org/wiki/%EC%9E%A5%EC%B9%98_%EB%8C%80%EC%97%AD%ED%8F%AD_%EB%AA%A9%EB%A1%9D][link]]               |
| infiniband vs ethernet  | [[https://sunhanintech.gitbooks.io/infiniband_programming_by_nminoru/content/chapter1.html][link]]               |
|                         |                    |
| ifconfig setup          | [[https://m.blog.naver.com/hymne/220945547214][link]] [[https://arer.tistory.com/m/96][link]] [[https://www.whatap.io/ko/blog/11/][link]]     |
| bond, ens, lo (NIC add) | [[https://nyyang.tistory.com/1][link]]  /proc/net    |
|                         |                    |

** systemd-nspawn
| *intro & tutorials | [[https://blog.stackframe.dev/6][link]] [[https://wiki.debian.org/Debootstrap][link]] |
| *symbolic link     | [[https://fruitdev.tistory.com/85][link]] [[https://dupont3031.tistory.com/entry/%EA%B8%B0%ED%98%B8-%EC%97%B0%EA%B2%B0%EC%9D%98-%EB%8B%A8%EA%B3%84%EA%B0%80-%EB%84%88%EB%AC%B4-%EB%A7%8E%EC%9D%8C-too-many-levels-of-symbolic-links][link]] |
| * nixos-container  | [[https://timklampe.cool/docs/example/systemd/systemd_nspawn/][link]] [[https://nixos.wiki/wiki/NixOS_Containers][link]] |
| * NixOPS           | [[https://www.johbo.com/2017/nixops-container.html][link]] [[https://hydra.nixos.org/build/115931128/download/1/manual/manual.html#chap-installation][link]] |
| * D-Bus            |           |
|                    |           |

**  docker
| docker tut, intro        | [[https://devlos.tistory.com/28][link]]  [[https://www.44bits.io/ko/post/easy-deploy-with-docker][link]]  [[https://www.44bits.io/ko/post/how-docker-image-work][link]]                                                                                                     |                 |
| dockerd                  | [[https://junstar92.tistory.com/169][link]]                                                                                                                 |                 |
| background execution     | # dockerd&                                                                                                           |                 |
| docker to systemd-nspawn | [[https://seanmcgary.com/posts/run-docker-containers-with-systemd-nspawn][link]]                                                                                                                 |                 |
|                          | * Dockerfile contents below                                                                                          |                 |
|                          | FROM alpine:latest                                                                                                   |                 |
|                          | ADD run.sh /                                                                                                         |                 |
|                          | RUN chmod +x /run.sh                                                                                                 |                 |
|                          |                                                                                                                      |                 |
|                          | * run.sh                                                                                                             |                 |
|                          | #! /bin/sh                                                                                                           |                 |
|                          | while true: do                                                                                                       |                 |
|                          | /bin/date                                                                                                            |                 |
|                          | /bin/sleep 5                                                                                                         |                 |
|                          | done                                                                                                                 |                 |
|                          |                                                                                                                      |                 |
|                          | # docker build -t [tag-name:version] .                                                                               |                 |
|                          | # docker image ls                                                                                                    |                 |
|                          | # docker run [tag-name:version] /run.sh                                                                              |                 |
|                          | # docker export "$(docker create --name [container-name] [tag-name:version] true)" [pl] tar -x -C [path to folder]   |                 |
|                          | # docker rm [container-name]                                                                                         |                 |
|                          | # systemd-nspawn --machine [machine-name] --directory [path to folder]                                               |                 |
|                          | # systemd-nspawn -M [machine-name] -D [path to folder] /run.sh                                                       |                 |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
| docker centos image      | # docker search centos                                                                                               | [[https://velog.io/@dailylifecoding/docker-install-centos-and-run-basic][link]] [[https://jaynamm.tistory.com/entry/%EB%8F%84%EC%BB%A4Docker-centOS-%EC%84%A4%EC%B9%98-%EB%B0%8F-%EC%8B%A4%ED%96%89][commands]]   |
|                          | # docker pull [image-name]                                                                                           |                 |
|                          | # docker image ls  or  docker image -a                                                                               |                 |
|                          | # docker run --name [container-name] --hostname [host-name] -it -d [image-name]                                      |                 |
|                          |                                                                                                                      |                 |
| centOS container setting | # locale -a                                                                                                          | [[https://sky-h-kim.tistory.com/44][link]]            |
|                          | # vi /etc/bashrc                                                                                                     |                 |
|                          | add to end of the '/etc/bashrc':  export LANG=C.utf8                                                                 |                 |
|                          | # source /etc/bashrc                                                                                                 |                 |
|                          |                                                                                                                      |                 |
| docker commit, push      |                                                                                                                      | [[https://www.44bits.io/ko/post/easy-deploy-with-docker][link]] [[https://hub.docker.com/][docker-hub]] |
| docker pull              | /var/lib/docker/image/overlay2/imagedb/content/sha256/,   $ docker pull [image-name:tag]                             | [[https://www.44bits.io/ko/post/easy-deploy-with-docker][link]] [[https://dveamer.github.io/backend/DockerImageDirectory.html][link]]       |
| docker firewall in nixos |                                                                                                                      | [[https://skaug.dev/firewall-and-docker-containers-in-nixos/][link]]            |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
| kasm in ubuntu container | # docker run -it -v /var/run/docker.sock:/var/run/docker.sock --memory=2g --memory-swap=2g [image-name:tag]          | [[https://m.blog.naver.com/isc0304/222274955992][link]] [[https://www.kasmweb.com/docs/latest/install/single_server_install.html][link]] [[https://velog.io/@weekbelt/%EB%8F%84%EC%BB%A4%EB%8D%B0%EB%AA%ACDocker-Daemon][link]]  |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
|                          |                                                                                                                      |                 |
| yum initial setting      | container setting first                                                                                              |                 |
|                          | # yum clean all                                                                                                      | [[https://hello-bryan.tistory.com/152][link]]            |
|                          | # yum repolist                                                                                                       |                 |
|                          | # yum -y update                                                                                                      |                 |
|                          |                                                                                                                      |                 |
|                          | No URLs in mirrorlist >> centos no more supported, so install centos-stream version                                  | [[https://jootc.com/p/202202273852][link]]            |
|                          | how to install bat (address changed as below, at release web page, mouse right click & copy link address to confirm) | [[https://www.linode.com/docs/guides/how-to-install-and-use-the-bat-command-on-linux/][link]]            |
|                          | https://github.com/sharkdp/bat/releases/download/v0.22.1/bat-v0.22.1-x86_64-unknown-linux-musl.tar.gz                |                 |
|                          | alias setting:   $ alias bat='/usr/local/bat/bat'                                                                    | [[https://coding-factory.tistory.com/800][link]]            |
|                          |                                                                                                                      |                 |

* HPC connect in 'Auros'
declarative-hpc/README.org
 login >> make profile >> file moving >>pbs job test
